<div class="main">
	<header class="task-header">
		<div class="task-type">
			<app-task-label [category]="task?.category || ''"></app-task-label>
		</div>
		<div class="close" (click)="closeOverlay()">
			<img src="images/assets/close_cross.svg" alt="" />
		</div>
	</header>

	<div class="content">
		<div class="headline">
			<h1 class="task-title">{{ task?.title }}</h1>
			<span class="task-description"> {{ task?.description }} </span>
		</div>

		<div class="task-conditions">
			<div class="task-due-date">
				<div class="date-headline">
					<h3>Due date:</h3>
				</div>
				<div class="date">
					<time [attr.datetime]="task?.dueDate">
						{{ task?.dueDate | date: "dd/MM/yyyy" }}
					</time>
				</div>
			</div>
			<div class="task-priority">
				<div class="priority-headline">
					<h3>Priority:</h3>
				</div>
				<div class="priority-tag">
					<div>
						<span class="priority">{{ task?.priority | titlecase }}</span>
					</div>
					<div class="priority-img">
						@if (task?.priority === "urgent") {
							<img src="images/add_task_section/prio_alta_red.svg" alt="Urgent" />
						} @else if (task?.priority === "medium") {
							<img src="images/add_task_section/priority_symbols.svg" alt="Medium" />
						} @else if (task?.priority === "low") {
							<img src="images/add_task_section/prio_baja.svg" alt="Low" />
						}
					</div>
				</div>
			</div>
		</div>

		<div class="task-assignees">
			<div class="assignee-headline">
				<h3>Assigned To:</h3>
			</div>
			<div class="assignees">
				@for (contact of assignedContacts; track contact.id) {
					<div class="assignee">
						<div class="initial">
							<span class="bubble">{{ contact.initials }}</span>
						</div>
						<div class="contact">
							<span>{{ contact.name }}</span>
						</div>
					</div>
				}
			</div>
		</div>

		<div class="task-subtasks">
			<div class="subtask-headline">
				<h3>Subtasks:</h3>
			</div>

			<div class="subtasks">
				@for (subtask of task?.subtasks; track subtask.id) {
					<div class="subtask">
						<div class="checkbox">
							<input
								type="checkbox"
								[checked]="subtask.completed"
								(change)="toggleSubtask(subtask.id)"
							/>
						</div>
						<div class="task">
							<span>{{ subtask.title }}</span>
						</div>
					</div>
				}
			</div>
		</div>
	</div>
	<footer class="task-actions">
		<app-button variant="edit" icon="images/contacs_section/edit.svg" (click)="onEditClick()">
			Edit
		</app-button>
		<app-button
			variant="delete"
			icon="images/contacs_section/trash_icon.svg"
			(click)="onDeleteClick()"
		>
			Delete
		</app-button>
	</footer>
</div>
